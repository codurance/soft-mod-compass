<!--
    templateType: page
    isAvailableForNewContent: true
-->

<!-- THIS FILE SHOULD NOT UPDATED ON HUBSPOT. PLEASE REFER TO README UNDER "MODIFYING COMPASS SURVEY TEMPLATE" -->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ content.html_title }}</title>
    <meta name="description" content="{{ content.meta_description }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>
    {{ standard_header_includes }}
    <style type="text/css">
      html {
        margin: 0;
        height: 100%;
        overflow: hidden;
      }
      #typeform-survey {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        border: 0;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>

  <div id="typeform-survey"></div>

  {{ standard_footer_includes }}

  <script src="https://embed.typeform.com/embed.js" type="text/javascript"></script>
  <script type="module">
    import { v4 as uuidv4 } from 'https://jspm.dev/uuid';


    const uuid = uuidv4();
    const hiddenFieldToPopulate = `uuid=${uuid}`;
    const typeformId = `j0ytULD0`;
    const typeformSurveyUrlWithUuidAsHiddenField = `https://form.typeform.com/to/${typeformId}/?${hiddenFieldToPopulate}`;
    const hubspotLandingPageWithUuidAsHiddenField = `https://info.codurance.com/en/dev-compass-details-submission/?${hiddenFieldToPopulate}`;

    const surveyElement = document.getElementById("typeform-survey");

    window.typeformEmbed.makeWidget(surveyElement, typeformSurveyUrlWithUuidAsHiddenField, {
      onSubmit: () => {
        setTimeout(() => {
          window.location = hubspotLandingPageWithUuidAsHiddenField;
        }, 2500);
      },
    });
  </script>
  </body>
</html>